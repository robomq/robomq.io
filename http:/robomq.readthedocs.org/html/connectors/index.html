<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="http://robomq.readthedocs.org/connectors/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Connectors - robomq.io</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Connectors";
        var mkdocs_page_input_path = "connectors.md";
        var mkdocs_page_url = "/connectors/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> robomq.io
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">What is RoboMQ.io</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../gettingStarted/">Getting started</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../creatingNewApplication/">Creating a new application</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../deviceIntegration/">IoT and M2M integration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../applicationIntegration/">Application integration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../SDK/">SDK & example codes</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">User Guide</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../AMQP/">AMQP Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../one-one/">One to one (direct) messaging</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../broadcast/">Broadcast (publish/subscribe)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../routing-key/">Key based message routing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../topic/">Filter based routing (topic)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../request-reply/">Request and reply</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MQTT/">MQTT</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../STOMP/">STOMP</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../WebSTOMP/">WebSTOMP</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../SSL/">SSL</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../REST/">REST</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../managed_file_transfer/">Managed File Transfer</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../IotAnalytics-walkthrough/">IoT Analytics</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Connectors</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Connectors</a>
    <ul class="current">
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MS-Active%20Directory/">MS Active Directory</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ADP-to-AD_Connector/">ADP to AD</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Workday_Connector/">Workday<sup>&reg;</sup> to AD</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Atlassian%20JIRA%20-%20Connector/">Atlassian JIRA</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Salesforce_Connector/">Salesforce</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Database_Connector/">Database</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Oracle-Database_Connector/">Oracle Database</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../about/">About</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">robomq.io</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
          <li>Connectors &raquo;</li>
      <li>Connectors</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/robomq/robomq.io/edit/master/docs/connectors.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="salesforce-connector">Salesforce Connector</h1>
<p>This section introduces you to the Salesforce Connector providing an interface between client devices/sensors and an customer's existing Salesforce workflow.  The <a href="https://www.robomq.io/#thingsconnect" target="_blank">connector</a> utilizes the <a href="https://www.robomq.io" target="_blank">RoboMQ</a> to ensure the guaranteed and reliable delivery of case information.</p>
<p><strong>Overview:</strong></p>
<p>A Salesforce customer may have one or more users/divisions within their organization.  Therefore, connector can be configured to create cases for more than one division or group within the organization based on the nature of the information or defect from the device or sensor.</p>
<p>The connector is designed to integrate seamlessly into the customer's existing management or diagnostics workflow in Salesforce.com allowing case creation to be automated.  This offers tremendous efficiency in reducing cost and valuable time without human intervention required to act upon and manually create each case.</p>
<p><img alt="Diagram of Salesforce Connector" src="../images/SalesforceConnector.png" /></p>
<p><strong>Startup Authentication Process:</strong></p>
<p>Before the connector can start processing any case requests, an access token must be provided by the Salesforce authentication server.</p>
<ul>
<li>The connector requests authorization on behalf on tenant providing username and password, then server verifies credentials and responds with access token.</li>
<li>The connector obtains the access token and submits with all subsequent requests.</li>
<li>If invalid user credentials are provided or other error prevents token from being issued, the user cannot authorize the connector to access Salesforce API in this flow.</li>
</ul>
<p><strong>Connector Operation:</strong></p>
<ul>
<li>The Salesforce connector currently supports <strong>Salesforce Case Create</strong> requests.</li>
<li>Devices/sensors issue case requests messages over AMQP through the RoboMQ broker.</li>
<li>The connector identifies the source of the incoming message, determines the destination Salesforce user/division, and creates a case record associated with their account.</li>
<li>The incoming AMQP playload consists of all elements necessary to create and assign a case (i.e. subject, description, contact name, etc.).</li>
<li>Mapping of the data elements from the device to the case attributes is configuration driven.</li>
</ul>
<p><strong>Configuration:</strong></p>
<p>The connector configuration mapping is a JSON formatted file requiring definition of 2 sections, "tenant" and "divisions" as follows:</p>
<ul>
<li>Tenant section:<ul>
<li>Salesforce client Id and secret for remote API access,</li>
<li>AMQP connection parameters and credentials.</li>
</ul>
</li>
<li>Divisions section:<ul>
<li>Salesforce user/division credentials</li>
<li>Default case record attributes</li>
<li>AMQP exchange, queue, and/or routing key.</li>
</ul>
</li>
</ul>
<p><strong>Prerequisite:</strong></p>
<ol>
<li>Requires Python 2.7 and above.</li>
<li>Install <a href="https://pypi.python.org/pypi/simple-salesforce" target="_blank">simple-salesforce</a> REST API client.</li>
<li>Create dead letter queue in your vhost with the script <code>deadLetterQueue.py</code> provided by <a href="https://www.robomq.io" target="_blank">RoboMQ</a>. Get the help session for detailed usage.  </li>
</ol>
<pre><code class="language-bash">python deadLetterQueue.py -?
</code></pre>
<p><strong>Execution:</strong></p>
<p>The Connector is intended for installation/execution either on the customer's enterprise platform or hosted on a supported cloud platform.
Starting it simply requires specifying the configuration mapping file as shown in example below:</p>
<pre><code class="language-bash">python SFconnector.py -i config.json
</code></pre>
<h1 id="database-connector">Database Connector</h1>
<p>This section introduces you to the DB Connector providing an API between your client applications/devices and back-end database. </p>
<p><a href="https://www.robomq.io" target="_blank">RoboMQ</a> has built a DBConnector module in Python. It consists of an interface between AMQP broker and backend database supporting these transactions:</p>
<ol>
<li>SQL Read &amp; AMQP Publish  </li>
<li>AMQP Get &amp; SQL Write  </li>
<li>AMQP Subscribe &amp; SQL Write</li>
</ol>
<p><strong>Overview:</strong></p>
<p><img alt="Diagram of DB Connector" src="../images/DBConnector.png" /></p>
<ol>
<li>DBConnector is easily installed, configured, and executes on client's enterprise platform, so there is no risk of insecure access to database. </li>
<li>DBConnector is configured to use one logical database. All SQL CRUD transactions are supported within the database.  </li>
<li>On the AMQP side, DBConnector will publish to a destination exchange and get messages from a source queue.   </li>
<li>Each Read &amp; Publish transaction consists of one AMQP message per database record (row).  </li>
<li>Each Get &amp; Write transaction consists of one or multiple write statements (insert or update) per AMQP message.  </li>
<li>Database records can be translated to/from AMQP message in either delimited text or JSON / XML format. You can specify any delimiter if using delimited text.  </li>
<li>If the destination exchange, source exchange &amp; queue does not exist, DBConnector will create them with the default arguments.  </li>
<li>All the methods of DBConnector returns True, False or None, which respectively indicates success, failure or empty result. Empty result happens when the source queue is empty or read query returns 0 rows.  </li>
<li>Messages that fail during processing (i.e. invalid content, database transaction failure, etc.) will be "dead lettered". You can find them in the dead letter queue and deal with them later.  </li>
<li>DBConnector handles all possible exceptions to prevent your invoker process from being interrupted. It will print the error or warning and write log if you have enabled logging.   </li>
</ol>
<p><strong>Configuration:</strong></p>
<p>The configuration file is written in JSON format. It consists of 3 major sections, "database", "broker" and "format".</p>
<ul>
<li>Database section:<ul>
<li>access information of the database,</li>
<li>query statement or template.</li>
</ul>
</li>
<li>Broker section:<ul>
<li>AMQP connection parameters and credentials,  </li>
<li>message source and destination.  </li>
</ul>
</li>
<li>Format section:<ul>
<li>whether message is delimited text, JSON or XML,</li>
<li>if delimited, specify the delimiter. </li>
</ul>
</li>
</ul>
<p><strong>Prerequisite:</strong></p>
<ol>
<li>Requires Python 2.7 and above.  </li>
<li>Install pypyodbc module.  </li>
<li>Install ODBC driver for the chosen database.</li>
</ol>
<p><strong>Execution:</strong></p>
<p>After that, three major methods you'll invoke are <code>selectNSend()</code>, <code>receiveNInsert()</code> and <code>subscribeNInsert()</code>.  </p>
<ol>
<li><code>selectNSend()</code> executes a read query in database and publish each row of the result as a message to the destination exchange.  </li>
<li><code>receiveNInsert()</code> gets a message from the source queue, from which extracts the values and write one record or multiple records into the database.  </li>
<li><code>subscribeNInsert()</code> follows the same work flow as <code>receiveNInsert()</code>, except for it listens on a queue and keeps consuming messages as they come in.   </li>
</ol>
<p>Putting it together, the whole example script for <code>subscribeNInsert()</code> would be,    </p>
<pre><code class="language-python">import os
from thingsConnect.sql import DBConnector

print &quot;1. load config from DBConnector.config&quot;
dbc = DBConnector(os.path.dirname(os.path.realpath(__file__)) + &quot;/DBConnector.config&quot;)
print &quot;2. subscribe &amp; insert, started listening&quot;
dbc.subscribeNInsert()
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../IotAnalytics-walkthrough/" class="btn btn-neutral float-left" title="IoT Analytics"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../MS-Active%20Directory/" class="btn btn-neutral float-right" title="MS Active Directory">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/robomq/robomq.io/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../IotAnalytics-walkthrough/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../MS-Active%20Directory/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
